<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="reptMgmt">
	<!--  reportLeft.jsp에 보여질 항목 리스트를 불러오기 위한 쿼리문 -->
	<select id="selectReportMenuList" parameterType="map" resultType="hashmap">
		select 
			SEQ, 
			NAME, 
			ICON_PATH `ORDER`, 
			(SELECT COUNT(*) FROM CC_REPORT_PAGE B WHERE B.CATE_CODE=A.SEQ AND B.SHOW_YN='Y') AS PAGE_COUNT,
			SHOW_DASHBOARD_GBN
		from 
			CC_REPORT_CATE A
		where 1=1
			and SHOW_YN = 'Y'
			and SHOW_DASHBOARD_GBN = 'CDW'
		ORDER BY `ORDER`
	</select>
	
	<select id="selectRGReportMenuList" parameterType="map" resultType="hashmap">
		select 
			SEQ, 
			NAME, 
			ICON_PATH `ORDER`, 
			(SELECT COUNT(*) FROM CC_REPORT_PAGE B WHERE B.CATE_CODE=A.SEQ AND B.SHOW_YN='Y') AS PAGE_COUNT,
			SHOW_DASHBOARD_GBN
		from 
			CC_REPORT_CATE A
		where 1=1
			and SHOW_YN = 'Y'
			and SHOW_DASHBOARD_GBN = 'RG'
		ORDER BY `ORDER`
	</select>
	
	<!--  reportLeft.jsp에 보여질 세부 항목 리스트를 불러오기 위한 쿼리문 -->
	<select id="selectReportSubMenuList" parameterType="map" resultType="hashmap">
		select SEQ, CATE_CODE, TITLE, URL, USER_ID, TARGET_ID
		from CC_REPORT_PAGE
		where 1=1
			and SHOW_YN = 'Y'
		ORDER BY `ORDER`
	</select>
	
	<!-- 해당 항목의 seq에 맞는 tableau url을 얻기 위한 url, user id, target id 불러오는 쿼리문 -->
	<select id="selectTableauInfo" parameterType="map" resultType="hashmap">
		select SEQ, CATE_CODE, TITLE, URL, USER_ID, TARGET_ID
		from CC_REPORT_PAGE
		where 1=1
		AND SEQ = #{SEQ}
	</select>
</mapper>