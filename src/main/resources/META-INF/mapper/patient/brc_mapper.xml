<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="patient">
    <select id="selectBrcList" resultType="com.softcen.bigcen.med.patient.vo.Brc">
       select 'SPECIMEN' subject,
       '1' pid,
       'BRC' id,
       'BRC' name,
       a.RCEP_DT time,
       a.DP_SPCN_NO dpSpcnNo, -- 검체번호
       CASE WHEN a.TISS_COLEC_CD = 'A1' THEN 'Tissue' WHEN a.TISS_COLEC_CD = 'A2' THEN 'Blood' END tissColecCd,-- 검체형태
       a.CELL_ORGAN_DIV_CD cellOrganDiyCd, -- 장기코드
       b.CD_NM cdNm
 FROM SATSMBASE a   -- S_조직세포접수기본
 join SATSMOGCD b on a.TISS_COLEC_CD = b.ORGAN_TISS_LCLAS_CD
               and a.CELL_ORGAN_DIV_CD = b.ORGAN_TISS_CD
AND a.RESCH_PAT_ID = #{patientId}

    </select>
</mapper>