<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC  
 "-//mybatis.org//DTD Mapper 3.0//EN"  
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
 
 
 <mapper namespace="ptsbsMgmt">

	<select id="selptsbsMgmt" parameterType="map" resultType="hashmap">
		select *
		from CRDW_SECU.BACKUP_uICE_SBST_NO
		WHERE
			1=1
			AND PAT_ID = #{PAT_ID}
	</select>
	
	
	<select id="selCheckPtsbsMap" parameterType="map" resultType="hashmap">
		select *
		from CRDW_SECU.PT_LABTEST_NO
		WHERE
			1=1
			AND PAT_SBST_NO = #{PAT_SBST_NO}
	</select>
	
	<select id="selCheckPtsbsMapAll" parameterType="map" resultType="hashmap">
		select *
		from CRDW_SECU.PT_LABTEST_NO
		WHERE
			1=1
		ORDER BY LDNG_YMD DESC
	</select>
	
	<insert id="insertptsbsMap" parameterType="map">
		INSERT INTO CRDW_SECU.PT_LABTEST_NO
		(
			PAT_SBST_NO,
			PAT_LAB_NO,
			LDNG_YMD
		)
		VALUES
		(
			 #{PAT_SBST_NO}
			,#{PAT_LAB_NO}
			,NOW()
		)
		
		<!-- 
		INSERT INTO CRDW_SECU.PT_LABTEST_NO
		(
			PAT_SBST_NO, 
			PAT_LAB_NO,
			LDNG_YMD
		)
		select LPAD(#{PAT_SBST_NO},10,'0')
		, #{PAT_LAB_NO}
		, getdate()
		 -->
	</insert>
	
	<update id="updateptsbsMap" parameterType="map">
		UPDATE   CRDW_SECU.PT_LABTEST_NO
		SET		 PAT_LAB_NO=#{PAT_LAB_NO}
				,LDNG_YMD=NOW()
		WHERE	1=1
		AND 	PAT_SBST_NO=#{PAT_SBST_NO}
	</update>
</mapper>
 
 
 