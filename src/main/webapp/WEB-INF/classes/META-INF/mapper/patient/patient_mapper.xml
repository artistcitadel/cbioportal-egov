<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="patientcpm">

    <select id="selectPatientChoiceList" resultType="com.asan.patient.vo.Patient">
      SELECT DISTINCT
                RESCH_PAT_ID patientId,
                'xxxx' sampleId,
                '9999' age,
                'xxxx' cancerStudies,
                'xxxxx' cancerType,
                'xxxx' cancerTypeDetails
     FROM CLSPNEXRT
    </select>

    <select id="selectLabTestHrc" resultType="com.asan.patient.vo.Patient">
      SELECT DISTINCT
                'Lab_test' subject,
                EXAM_CD id,
                IFNULL(EXAM_ENG_NM, EXAM_CD) name
                FROM CLSPNEXRT
      <![CDATA[
        WHERE LENGTH(EXAM_CD) < 6
      ]]>
    </select>

    <select id="selectLabTest" resultType="com.asan.patient.vo.Patient">
     SELECT
     'Lab_test' subject,
     EXAM_SLIP_CD pid ,
                         EXAM_CD id,
                         IFNULL(EXAM_ENG_NM, EXAM_CD) name,
                         RCEP_DT time,
                         ROUND(IFNULL(SUM(EXAM_RSLT_VAL),0),2) exam,
                         ROUND(IFNULL(SUM(MARK_RSLT_VAL),0),2) mark,
                         ROUND(IFNULL(SUM(CRTE_MSR_VAL),0),2)  crte

        FROM CLSPNEXRT
        /*WHERE RESCH_PAT_ID = '6905950076' AND EXAM_CD IN ('DA0036','BD0012','BA0094') AND SUBSTRING(RCEP_DT,1,4) = '2017' OR (EXAM_CD='BD0012' AND RCEP_DT='20040427')*/
        WHERE RESCH_PAT_ID = '6905950076' /*AND EXAM_CD = 'AFIN'*/
        /*AND EXAM_ENG_NM = 'Rh variant Ag,Automation (Semi-Qn)[Agglutination],Blood'*/
        GROUP BY EXAM_SLIP_CD, EXAM_CD, EXAM_ENG_NM, RCEP_DT
        ORDER BY 2,3,5
        LIMIT  100
 	</select>

    <select id="selectPatientMuList" resultType="com.asan.patient.vo.PatientMut">
    SELECT MTTN_EXAM_RSLT_ID mttnExamRsltId,
            RESCH_PAT_ID reschPatId,
            GENE_EXAM_SPCN_ID geneExamSpcnId,
            EXAM_NO examNo,
            GENE_EXAM_MTH_NM geneExamMthNm,
            CHRM_NO chrnNo,
            GENE_NM geneNm,
            GENE_VARI_ST_LOC_VAL geneVariStLocVal,
            GENE_VARI_END_LOC_VAL geneVariEndLocVal,
            DNA_STRND_VAL dnaStandVal,
            GENE_VARI_CLSF_NM geneVariClsfNm,
            GENE_VARI_TYP_NO geneVariTypNo,
            REF_ALLELE_SQNC_VAL refAlleleSqncVal,
            VARI_ALLELE_SQNC_VAL variAlleleSqncVal,
            MTTN_STAT_NO mttnStatNo,
            HGVSC_VAL hgvscVal,
            HGVSP_VAL hgvspVal,
            TOT_ALLELE_READ_CNT totAlleleReadCnt,
            REF_ALLELE_READ_CNT refAlleleReadCnt,
            VARI_ALLELE_READ_CNT variAlleleReadCnt,
            VARI_ALLELE_READ_RT variAlleleReadRt,
            EXON_LOC_VAL exonLocVal,
            INTRN_LOC_VAL intrnLocVal,
            TRSC_ID trscId
            FROM PMGERMUEM
            WHERE RESCH_PAT_ID = #{patientId}
 	</select>

</mapper>


